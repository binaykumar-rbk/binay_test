<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" data-whc_version="27.1">
    <head><link rel="shortcut icon" href="../favicon.ico"/><link rel="icon" href="../favicon.ico"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="DC.rights.owner" content="(C) Copyright 2025"/><meta name="copyright" content="(C) Copyright 2025"/><meta name="generator" content="DITA-OT"/><meta name="DC.type" content="task"/><meta name="description" content="Create the kubeconfig file, the ClusterRole, and the ClusterRoleBinding for the kubeconfig user to assign the permissions required to protect all namespaces."/><meta name="DC.relation" content="../kubernetes/k8s_least_privilege_configuration.html"/><meta name="DC.relation" content="../kubernetes/k8s_configuring_perms_kubeconfig.html"/><meta name="DC.relation" content="../kubernetes/k8s_configuring_perms_specific_resources.html"/><meta name="DC.format" content="HTML5"/><meta name="DC.identifier" content="k8s_configuring_namespace_protection"/>        
      <title>Configuring namespace protection</title><!--  Generated with Oxygen version 27.1, build number 2025063009.  --><meta name="wh-path2root" content="../"/><meta name="wh-toc-id" content="k8s_configuring_namespace_protection-d22872e30047"/><meta name="wh-source-relpath" content="kubernetes/k8s_configuring_namespace_protection.dita"/><meta name="wh-out-relpath" content="kubernetes/k8s_configuring_namespace_protection.html"/>

    <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/commons.css?buildId=2025063009"/>
    <link rel="stylesheet" type="text/css" href="../oxygen-webhelp/app/topic.css?buildId=2025063009"/>

    <script src="../oxygen-webhelp/app/options/properties.js?buildId=20251205025624"></script>
    <script src="../oxygen-webhelp/app/localization/strings.js?buildId=2025063009"></script>
    <script src="../oxygen-webhelp/app/search/index/keywords.js?buildId=20251205025624"></script>
    <script defer="defer" src="../oxygen-webhelp/app/commons.js?buildId=2025063009"></script>
    <script defer="defer" src="../oxygen-webhelp/app/topic.js?buildId=2025063009"></script>
<link rel="stylesheet" type="text/css" href="../oxygen-webhelp/template/oxygen.css?buildId=2025063009"/><link rel="stylesheet" type="text/css" href="../oxygen-webhelp/template/html-tiles-style-en.css?buildId=2025063009"/>
    <script>
    window.addEventListener("load", myInit, true); function myInit(){  addTargetBlank() };
    </script>
        
    <script>
    function addTargetBlank() {
    const links = document.querySelectorAll('.open-in-tab');
    links.forEach(link =&gt; {
    link.setAttribute('target', '_blank');
    });
    }
    </script>
    
    <!-- OneTrust Cookies Consent Notice start for docs.rubrik.com -->
    <script src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" type="text/javascript" charset="UTF-8" data-domain-script="48df0b20-13be-42ae-a47f-8fda7fae9dc7"></script>
        <script type="text/javascript">
            function OptanonWrapper() {
            }</script>
        <!-- OneTrust Cookies Consent Notice end for docs.rubrik.com -->
</head>

    <body id="k8s_configuring_namespace_protection" class="wh_topic_page frmBody">
        <a href="#wh_topic_body" class="visually-hidden visually-hidden-focusable">
            Jump to main content
        </a>
        
        
        
        
        <header class="navbar navbar-default wh_header">
    <div class="container-fluid navbar-expand-md">
        <div class="wh_header_flex_container navbar-nav navbar-dark">
            <div class="wh_logo_and_publication_title_container">
                <div class="wh_logo_and_publication_title">
                    
                    <a href="../index.html" class=" wh_logo d-none d-sm-block "><img src="../oxygen-webhelp/template/resources/images/rubrik_logo.png" alt="Rubrik Security Cloud"/></a>
                    <div class=" wh_publication_title "><a href="../index.html"><span class="title">Rubrik Security Cloud</span></a></div>
                    
                </div>
                
                
            </div>

            <div class="wh_top_menu_and_indexterms_link collapse navbar-collapse" id="wh_top_menu_and_indexterms_link">
                
                
                
                <title>toggle</title>
        <div style="display: flex; justify-content: right; margin: 10px 0 0 0">
            <label class="switch">
                <input name="theme" type="checkbox" onclick="toggleTheme()" checked="checked"/>
                <span title="Switch theme" class="eye"></span>
            </label>
        </div>
        <script>
            // function to set a given theme/color-scheme
            function setTheme(themeName) {
                localStorage.setItem('theme', themeName);
                document.documentElement.className = themeName;
            }
            
            // function to toggle between light and dark theme
            function toggleTheme() {
                if (localStorage.getItem('theme') === 'theme-dark') {
                    setTheme('theme-light');
                } else {
                    setTheme('theme-dark');
                }
            }
            
            // Immediately invoked function to set the theme on initial load
            (function () {
                if (localStorage.getItem('theme') === 'theme-light') {
                    setTheme('theme-light');
                } else {
                    setTheme('theme-dark');
                }
            })();</script>
    
            </div>
        </div>
    </div>
</header>
        
        
         
        
        <div class=" wh_search_input navbar-form wh_topic_page_search search " role="form">
            
            
            
            <form id="searchForm" method="get" role="search" action="../search.html"><div><input type="search" placeholder="Search " class="wh_search_textfield" id="textToSearch" name="searchQuery" aria-label="Search query" required="required"/><button type="submit" class="wh_search_button" aria-label="Search"><span class="search_input_text">Search</span></button></div></form>
            
            
            
        </div>
        
        <div class="container-fluid navbar-expand-md" id="wh_topic_container">
            <div class="row">

                <nav class="wh_tools d-print-none" aria-label="Tools">
                    
                    <div data-tooltip-position="bottom" class=" wh_breadcrumb "><ol class="d-print-none"><li><span class="home"><a href="../index.html"><span>Home</span></a></span></li><li><div class="topicref"><div class="title"><a href="../rubrik/supported_workloads.html">Workloads</a><div class="wh-tooltip"><p class="shortdesc">Securely manage and protect data across a wide variety of workload
                types.</p></div></div></div></li><li><div class="topicref" data-id="k8s_workload_protection"><div class="title"><a href="../kubernetes/k8s_workload_protection.html">Kubernetes protection</a><div class="wh-tooltip"><p class="shortdesc">You can use Kubernetes protection to protect your on-premise or cloud-native         Kubernetes clusters using a protection set.</p></div></div></div></li><li><div class="topicref" data-id="least_privilege_configuration_K8S"><div class="title"><a href="../kubernetes/k8s_least_privilege_configuration.html">Least privilege configuration for Kubernetes</a><div class="wh-tooltip"><p class="shortdesc">You can set up your Kubernetes kubeconfig with the least privileges so that only         minimal RBAC permissions are assigned to users and service accounts.</p></div></div></div></li><li class="active"><div class="topicref" data-id="k8s_configuring_namespace_protection"><div class="title"><a href="../kubernetes/k8s_configuring_namespace_protection.html">Configuring namespace protection</a><div class="wh-tooltip"><p class="shortdesc">Create the kubeconfig file, the ClusterRole, and the ClusterRoleBinding for the     kubeconfig user to assign the permissions required to protect all namespaces.</p></div></div></div></li></ol></div>
                    
                    
                    
                    <div class="wh_right_tools">
                        <button class="wh_hide_highlight" aria-label="Toggle search highlights" title="Toggle search highlights"></button>
                        <button class="webhelp_expand_collapse_sections" data-next-state="collapsed" aria-label="Collapse sections" title="Collapse sections"></button>
                        <div class=" wh_navigation_links "><span id="topic_navigation_links" class="navheader">
  
<span class="navprev"><a class="- topic/link link" href="../kubernetes/k8s_configuring_perms_kubeconfig.html" title="Configuring permissions to protect all resources" aria-label="Previous topic: Configuring permissions to protect all resources" rel="prev"></a></span>  
<span class="navnext"><a class="- topic/link link" href="../kubernetes/k8s_configuring_perms_specific_resources.html" title="Configuring permissions to protect specific resources" aria-label="Next topic: Configuring permissions to protect specific resources" rel="next"></a></span>  </span></div>
                        
                        
                        
                        <div class=" wh_print_link print d-none d-md-inline-block "><button onClick="window.print()" title="Print this page" aria-label="Print this page"></button></div>
                        
                        <button type="button" id="wh_toc_button" class="custom-toggler navbar-toggler collapsed wh_toggle_button navbar-light" aria-expanded="false" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                    </div>
                    
                </nav>
            </div>
            
            
            
            
            <div class="wh_content_area">
                <div class="row">
                    
                        <nav id="wh_publication_toc" class="col-lg-3 col-md-3 col-sm-12 d-md-block d-none d-print-none" aria-label="Table of Contents Container">
                            <div id="wh_publication_toc_content">
	                            <button id="wh_close_publication_toc_button" class="close-toc-button d-none" aria-label="Toggle publishing table of content" aria-controls="wh_publication_toc" aria-expanded="true">
		                            <span class="close-toc-icon-container">
		                                <span class="close-toc-icon"></span>     
		                            </span>
		                        </button>
		                        
                            	<div class=" wh_publication_toc " data-tooltip-position="right"><span class="expand-button-action-labels"><span id="button-expand-action" role="button" aria-label="Expand"></span><span id="button-collapse-action" role="button" aria-label="Collapse"></span><span id="button-pending-action" role="button" aria-label="Pending"></span></span><ul role="tree" aria-label="Table of Contents"><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d22872e858" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d22872e858-link" class="wh-expand-btn"></span><div class="title"><a href="../saas/common/getting_started_with_rsc.html" id="tocId-d22872e858-link">Getting started with RSC</a><div class="wh-tooltip"><p class="shortdesc">Guide for initial configuration, network prerequisites, and primary account
                setup.</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d22872e1883" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d22872e1883-link" class="wh-expand-btn"></span><div class="title"><a href="../saas/common/rubrik_clusters_2.html" id="tocId-d22872e1883-link">Rubrik clusters</a><div class="wh-tooltip"><p class="shortdesc">Manage on-premises infrastructure, including cluster registration, CDM
                upgrades, and hardware configuration.</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d22872e4115" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d22872e4115-link" class="wh-expand-btn"></span><div class="title"><a href="../saas/sla_domains.html" id="tocId-d22872e4115-link">Protection Policies</a><div class="wh-tooltip"><p class="shortdesc">Configure SLA Domains to define backup frequency, retention, archiving, and
                replication schedules.</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d22872e8027" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d22872e8027-link" class="wh-expand-btn"></span><div class="title"><a href="../saas/users_access.html" id="tocId-d22872e8027-link">Security</a><div class="wh-tooltip"><p class="shortdesc">Configure and manage RSC security features, including user access, SSO,
                Quorum Authorization, and data encryption.</p></div></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="tocId-d22872e10951" class="topicref" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action tocId-d22872e10951-link" class="wh-expand-btn"></span><div class="title"><a href="../rubrik/supported_workloads.html" id="tocId-d22872e10951-link">Workloads</a><div class="wh-tooltip"><p class="shortdesc">Securely manage and protect data across a wide variety of workload
                types.</p></div></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem"><div data-tocid="supported_workloads-d22872e10957" class="topicref" data-id="supported_workloads" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../rubrik/supported_workloads.html" id="supported_workloads-d22872e10957-link"><span class="ph">Rubrik Security Cloud</span> workloads</a><div class="wh-tooltip"><p class="shortdesc"><span class="ph">RSC</span> securely manages and protects data from a wide variety of         workload types.</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d22872e10972" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d22872e10972-link" class="wh-expand-btn"></span><div class="title"><a href="../saas/aws_workloads.html" id="tocId-d22872e10972-link">Cloud Workloads</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d22872e18693" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d22872e18693-link" class="wh-expand-btn"></span><div class="title"><a href="../nutanix_ahv/ahv_virtual_machines.html" id="tocId-d22872e18693-link">Data Center Workloads</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="saas_workloads-d22872e22162" class="topicref" data-id="saas_workloads" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action saas_workloads-d22872e22162-link" class="wh-expand-btn"></span><div class="title"><a href="../saas/saas_workloads.html" id="saas_workloads-d22872e22162-link">SaaS workloads</a><div class="wh-tooltip"><p class="shortdesc"><span class="ph">RSC</span> protection for SaaS workloads simplifies protecting and managing         backups for SaaS application instances.</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d22872e23043" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d22872e23043-link" class="wh-expand-btn"></span><div class="title"><a href="../adds/ad_protection.html" id="tocId-d22872e23043-link">Identity Workloads</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d22872e24188" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d22872e24188-link" class="wh-expand-btn"></span><div class="title"><a href="../db2/ibm_db2.html" id="tocId-d22872e24188-link">Database Workloads</a></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="fs_filesystems-d22872e29021" class="topicref" data-id="fs_filesystems" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action fs_filesystems-d22872e29021-link" class="wh-expand-btn"></span><div class="title"><a href="../saas/fs_filesystems.html" id="fs_filesystems-d22872e29021-link">File systems</a><div class="wh-tooltip"><p class="shortdesc"><span class="ph">RSC</span> provides management and protection of file system data on supported Linux,         Unix, and Windows hosts through filesets.</p></div></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="k8s_workload_protection-d22872e29630" class="topicref" data-id="k8s_workload_protection" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action k8s_workload_protection-d22872e29630-link" class="wh-expand-btn"></span><div class="title"><a href="../kubernetes/k8s_workload_protection.html" id="k8s_workload_protection-d22872e29630-link">Kubernetes protection</a><div class="wh-tooltip"><p class="shortdesc">You can use Kubernetes protection to protect your on-premise or cloud-native         Kubernetes clusters using a protection set.</p></div></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem"><div data-tocid="k8s_deployment_architecture-d22872e29641" class="topicref" data-id="k8s_deployment_architecture" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../kubernetes/k8s_deployment_architecture.html" id="k8s_deployment_architecture-d22872e29641-link">Deployment architecture for Kubernetes protection</a><div class="wh-tooltip"><p class="shortdesc">For the data protection deployment architecture in Kubernetes protection, <span class="ph">RSC</span> serves as the control plane and stores the Persistent Volume backups on         a Rubrik cluster.</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="k8s_prereqs-d22872e29655" class="topicref" data-id="k8s_prereqs" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action k8s_prereqs-d22872e29655-link" class="wh-expand-btn"></span><div class="title"><a href="../kubernetes/k8s_prereqs.html" id="k8s_prereqs-d22872e29655-link">Kubernetes protection prerequisites</a><div class="wh-tooltip"><p class="shortdesc">There are common and specific prerequisites for Kubernetes protection.</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="k8s_protection-d22872e29751" class="topicref" data-id="k8s_protection" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action k8s_protection-d22872e29751-link" class="wh-expand-btn"></span><div class="title"><a href="../kubernetes/k8s_protection.html" id="k8s_protection-d22872e29751-link">Kubernetes protection requirements</a><div class="wh-tooltip"><p class="shortdesc">You can use <span class="ph">Rubrik Security Cloud</span> to secure your on-premise or public cloud         Kubernetes clusters by protecting either entire Kubernetes namespaces or specific subsets         within a namespace using the protection set filtering feature.</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="k8s_cluster_onboard_discover_rsc-d22872e29888" class="topicref" data-id="k8s_cluster_onboard_discover_rsc" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action k8s_cluster_onboard_discover_rsc-d22872e29888-link" class="wh-expand-btn"></span><div class="title"><a href="../kubernetes/k8s_cluster_onboard_discover_rsc.html" id="k8s_cluster_onboard_discover_rsc-d22872e29888-link">Kubernetes cluster onboarding</a><div class="wh-tooltip"><p class="shortdesc">To onboard your Kubernetes cluster, add it to your <span class="ph">RSC</span> domain and         provide <span class="ph">RSC</span> with access to the cluster and sufficient         permissions.</p></div></div></div></li><li role="treeitem" aria-expanded="true"><div data-tocid="least_privilege_configuration_K8S-d22872e30025" class="topicref" data-id="least_privilege_configuration_K8S" data-state="expanded"><span role="button" tabindex="0" aria-labelledby="button-collapse-action least_privilege_configuration_K8S-d22872e30025-link" class="wh-expand-btn"></span><div class="title"><a href="../kubernetes/k8s_least_privilege_configuration.html" id="least_privilege_configuration_K8S-d22872e30025-link">Least privilege configuration for Kubernetes</a><div class="wh-tooltip"><p class="shortdesc">You can set up your Kubernetes kubeconfig with the least privileges so that only         minimal RBAC permissions are assigned to users and service accounts.</p></div></div></div><ul role="group" class="navbar-nav nav-list"><li role="treeitem"><div data-tocid="k8s_configuring_perms_kubeconfig-d22872e30036" class="topicref" data-id="k8s_configuring_perms_kubeconfig" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../kubernetes/k8s_configuring_perms_kubeconfig.html" id="k8s_configuring_perms_kubeconfig-d22872e30036-link">Configuring permissions to protect all resources</a><div class="wh-tooltip"><p class="shortdesc">Create the kubeconfig file, and then set up the ClusterRole and ClusterRoleBinding to     grant the kubeconfig user the necessary permissions to protect all namespaces and cluster-wide     resources.</p></div></div></div></li><li role="treeitem" class="active"><div data-tocid="k8s_configuring_namespace_protection-d22872e30047" class="topicref" data-id="k8s_configuring_namespace_protection" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../kubernetes/k8s_configuring_namespace_protection.html" id="k8s_configuring_namespace_protection-d22872e30047-link">Configuring namespace protection</a><div class="wh-tooltip"><p class="shortdesc">Create the kubeconfig file, the ClusterRole, and the ClusterRoleBinding for the     kubeconfig user to assign the permissions required to protect all namespaces.</p></div></div></div></li><li role="treeitem"><div data-tocid="k8s_configuring_perms_specific_resources-d22872e30058" class="topicref" data-id="k8s_configuring_perms_specific_resources" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../kubernetes/k8s_configuring_perms_specific_resources.html" id="k8s_configuring_perms_specific_resources-d22872e30058-link">Configuring permissions to protect specific resources</a><div class="wh-tooltip"><p class="shortdesc">Create the kubeconfig file, the ClusterRole, and the ClusterRoleBinding for the     kubeconfig user to use to assign the required permissions to protect specific resources within a     namespace.</p></div></div></div></li><li role="treeitem"><div data-tocid="post_onboarding_perms_updates-d22872e30069" class="topicref" data-id="post_onboarding_perms_updates" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../kubernetes/post_onboarding_perms_updates.html" id="post_onboarding_perms_updates-d22872e30069-link">Post-onboarding permissions updates</a><div class="wh-tooltip"><p class="shortdesc">Rubrik recommends maintaining the most current privileges in your Kubernetes cluster.         The method for updating privileges depends on which onboarding method you         used.</p></div></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="kubernetes_labels-d22872e30080" class="topicref" data-id="kubernetes_labels" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action kubernetes_labels-d22872e30080-link" class="wh-expand-btn"></span><div class="title"><a href="../kubernetes/kubernetes_labels.html" id="kubernetes_labels-d22872e30080-link">Kubernetes labels</a><div class="wh-tooltip"><p class="shortdesc"><span class="ph">RSC</span> integrates with Kubernetes native labels to manage data         protection, enabling you to use Kubernetes labels to identify and group resources, and then         associate those labels with SLA Domains.</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="k8s_cluster_protection_set-d22872e30156" class="topicref" data-id="k8s_cluster_protection_set" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action k8s_cluster_protection_set-d22872e30156-link" class="wh-expand-btn"></span><div class="title"><a href="../kubernetes/k8s_cluster_protection_set.html" id="k8s_cluster_protection_set-d22872e30156-link">Protection sets for Kubernetes cluster workloads</a><div class="wh-tooltip"><p class="shortdesc">A Kubernetes cluster protection set is a protectable workload that you create and         protect using <span class="ph">RSC</span>. A protection set might include an entire Kubernetes         namespace or a subset of resources within the namespace.</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="k8s_browse_kubernetes_snapshots-d22872e30252" class="topicref" data-id="k8s_browse_kubernetes_snapshots" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action k8s_browse_kubernetes_snapshots-d22872e30252-link" class="wh-expand-btn"></span><div class="title"><a href="../kubernetes/k8s_browse_kubernetes_snapshots.html" id="k8s_browse_kubernetes_snapshots-d22872e30252-link">Browse Kubernetes snapshots</a><div class="wh-tooltip"><p class="shortdesc">You can use <span class="ph">RSC</span> to browse the resources in a Kubernetes snapshot for         protection sets and virtual machines.</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="k8s_openshift_clusters-d22872e30277" class="topicref" data-id="k8s_openshift_clusters" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action k8s_openshift_clusters-d22872e30277-link" class="wh-expand-btn"></span><div class="title"><a href="../kubernetes/k8s_openshift_clusters.html" id="k8s_openshift_clusters-d22872e30277-link">OpenShift Virtual Machine workload</a><div class="wh-tooltip"><p class="shortdesc">You can use <span class="ph">RSC</span> to protect containers and virtual machines managed on         Kubernetes OpenShift clusters.</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="k8s_workload_protection_policies-d22872e30338" class="topicref" data-id="k8s_workload_protection_policies" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action k8s_workload_protection_policies-d22872e30338-link" class="wh-expand-btn"></span><div class="title"><a href="../kubernetes/k8s_workload_protection_policies.html" id="k8s_workload_protection_policies-d22872e30338-link">Kubernetes workload protection policies</a><div class="wh-tooltip"><p class="shortdesc">In <span class="ph">RSC</span>, you can take both policy-based and on-demand snapshots of         Kubernetes protection sets.</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="k8s_snapshot_retention-d22872e30399" class="topicref" data-id="k8s_snapshot_retention" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action k8s_snapshot_retention-d22872e30399-link" class="wh-expand-btn"></span><div class="title"><a href="../kubernetes/k8s_snapshot_retention.html" id="k8s_snapshot_retention-d22872e30399-link">Kubernetes snapshot retention</a><div class="wh-tooltip"><p class="shortdesc"><span class="ph">RSC</span> allows changing the retention period of Kubernetes snapshots with         the help of SLA Domains. Kubernetes snapshot retention works only with Rubrik clusters         running Rubrik CDM version 7.0.2-p2 and later.</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="K8s_crd_rsc-d22872e30434" class="topicref" data-id="K8s_crd_rsc" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action K8s_crd_rsc-d22872e30434-link" class="wh-expand-btn"></span><div class="title"><a href="../kubernetes/K8s_crd_rsc.html" id="K8s_crd_rsc-d22872e30434-link"><span class="ph">RSC</span> Custom resource definitions</a><div class="wh-tooltip"><p class="shortdesc">You can use the <span class="ph">RSC</span> custom resource definitions to create custom         resources for backup and recovery workflows using APIs native to Kubernetes.</p></div></div></div></li><li role="treeitem"><div data-tocid="anomaly_detection_k8-d22872e30775" class="topicref" data-id="anomaly_detection_k8" data-state="leaf"><span role="button" class="wh-expand-btn"></span><div class="title"><a href="../kubernetes/anomaly_detection_k8.html" id="anomaly_detection_k8-d22872e30775-link"><span class="ph">Anomaly Detection</span> for Kubernetes</a><div class="wh-tooltip"><p class="shortdesc">You can enable <span class="ph">Anomaly Detection</span> for Kubernetes virtual machines and protection         sets to identify and analyze anomalous events that can indicate a ransomware         attack.</p></div></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="mv_managed_volumes_sla_managed_volumes-d22872e30791" class="topicref" data-id="mv_managed_volumes_sla_managed_volumes" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action mv_managed_volumes_sla_managed_volumes-d22872e30791-link" class="wh-expand-btn"></span><div class="title"><a href="../managedvolumes/mv_managed_volumes_sla_managed_volumes.html" id="mv_managed_volumes_sla_managed_volumes-d22872e30791-link">Managed Volumes and SLA Managed Volumes</a><div class="wh-tooltip"><p class="shortdesc">Managed Volumes in <span class="ph">RSC</span> protect and manage data while SLA Managed         Volumes schedule and initiate backups using an SLA Domain.</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="microsoft_dynamics_365-d22872e31228" class="topicref" data-id="microsoft_dynamics_365" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action microsoft_dynamics_365-d22872e31228-link" class="wh-expand-btn"></span><div class="title"><a href="../microsoft_dynamics_365/microsoft_dynamics_365.html" id="microsoft_dynamics_365-d22872e31228-link">Microsoft Dynamics 365</a><div class="wh-tooltip"><p class="shortdesc"><span class="ph">RSC</span> protects the tables and metadata in your Microsoft Dynamics 365         subscription.</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="m365-d22872e31722" class="topicref" data-id="m365" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action m365-d22872e31722-link" class="wh-expand-btn"></span><div class="title"><a href="../saas/m365.html" id="m365-d22872e31722-link">Microsoft 365</a><div class="wh-tooltip"><p class="shortdesc">Using the data management and protection services offered by <span class="ph">Rubrik Security Cloud</span>, you can protect Microsoft 365 data operations.</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="m365_backup_storage-d22872e33761" class="topicref" data-id="m365_backup_storage" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action m365_backup_storage-d22872e33761-link" class="wh-expand-btn"></span><div class="title"><a href="../m365_backup_storage/m365_backup_storage.html" id="m365_backup_storage-d22872e33761-link">Microsoft 365 Backup Storage</a><div class="wh-tooltip"><p class="shortdesc">With the Microsoft 365 Backup Storage feature, you can back up Microsoft 365         applications such as SharePoint sites, OneDrive user accounts, and Exchange mailboxes. You         can also restore large volumes of data during ransomware attacks, accidental deletion, or         malicious data deletion and overwrite events.</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="ms_exchange_server-d22872e34153" class="topicref" data-id="ms_exchange_server" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action ms_exchange_server-d22872e34153-link" class="wh-expand-btn"></span><div class="title"><a href="../saas/ms_exchange_server.html" id="ms_exchange_server-d22872e34153-link">Microsoft Exchange Server</a><div class="wh-tooltip"><p class="shortdesc"><span class="ph">Rubrik Security Cloud</span> provides protection for Microsoft Exchange         Servers.</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="ncd_data_sets-d22872e34366" class="topicref" data-id="ncd_data_sets" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action ncd_data_sets-d22872e34366-link" class="wh-expand-btn"></span><div class="title"><a href="../saas/ncd_data_sets.html" id="ncd_data_sets-d22872e34366-link"><span class="ph">NAS CD</span> data sets</a><div class="wh-tooltip"><p class="shortdesc"><span class="ph">Rubrik NAS Cloud Direct</span> offers secure data protection with high-performance,         scalable enterprise backup, and archive services for unstructured file data.</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="nas_systems-d22872e34780" class="topicref" data-id="nas_systems" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action nas_systems-d22872e34780-link" class="wh-expand-btn"></span><div class="title"><a href="../nas/nas_systems.html" id="nas_systems-d22872e34780-link">NAS systems</a><div class="wh-tooltip"><p class="shortdesc"><span class="ph">RSC</span> manages and protects NFS and SMB shares on NAS systems for     efficient data storage and retrieval.</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="snapmirror_cloud-d22872e35138" class="topicref" data-id="snapmirror_cloud" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action snapmirror_cloud-d22872e35138-link" class="wh-expand-btn"></span><div class="title"><a href="../saas/snapmirror_cloud.html" id="snapmirror_cloud-d22872e35138-link">SnapMirror Cloud</a><div class="wh-tooltip"><p class="shortdesc"><span class="ph">RSC</span> protects user data replicated by the NetApp SnapMirror Cloud         service.</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="windows_volume_groups-d22872e35239" class="topicref" data-id="windows_volume_groups" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action windows_volume_groups-d22872e35239-link" class="wh-expand-btn"></span><div class="title"><a href="../saas/windows_volume_groups.html" id="windows_volume_groups-d22872e35239-link">Windows volume groups</a><div class="wh-tooltip"><p class="shortdesc">A volume group is a Rubrik workload comprised of at least one data storage volume on         a Windows host.</p></div></div></div></li></ul></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d22872e35433" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d22872e35433-link" class="wh-expand-btn"></span><div class="title"><a href="../saas/ri_ransomware_monitoring.html" id="tocId-d22872e35433-link">Cyber Resiliency</a><div class="wh-tooltip"><p class="shortdesc">Detect and govern risk using Threat Analytics, Data Security Posture, and
                Identity Resilience. Prepare for automated Orchestrated Application
                Recovery.</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d22872e39323" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d22872e39323-link" class="wh-expand-btn"></span><div class="title"><a href="../saas-ai/ruby.html" id="tocId-d22872e39323-link">AI and Automation</a><div class="wh-tooltip"><p class="shortdesc">Utilize conversational AI with Ruby and Annapurna and access the GraphQL API
                Playground for scripting.</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d22872e39569" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d22872e39569-link" class="wh-expand-btn"></span><div class="title"><a href="../saas/integration_third_party_apps_in_rsc.html" id="tocId-d22872e39569-link">Integrations and License Usage</a><div class="wh-tooltip"><p class="shortdesc">Connect external systems, such as ServiceNow and Zscaler. Monitor
                consumption, entitlements, and license usage.</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d22872e39918" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d22872e39918-link" class="wh-expand-btn"></span><div class="title"><a href="../saas/common/events.html" id="tocId-d22872e39918-link">Monitoring and Reporting</a><div class="wh-tooltip"><p class="shortdesc">Monitor live events, generate reports, check real-time system health, and
                configure notifications.</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d22872e41630" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d22872e41630-link" class="wh-expand-btn"></span><div class="title"><a href="../saas/rsc_insights.html" id="tocId-d22872e41630-link">Diagnostic Tools</a><div class="wh-tooltip"><p class="shortdesc">Access diagnostic guides, RSC Insights, Support Tunnels, and solutions for
                operational issues.</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d22872e41717" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d22872e41717-link" class="wh-expand-btn"></span><div class="title"><a href="../saas/mt_multitenant_organizations.html" id="tocId-d22872e41717-link">Multitenancy</a><div class="wh-tooltip"><p class="shortdesc">Logically isolate shared resources to ensure organizations can only access
                their specific data.</p></div></div></div></li><li role="treeitem" aria-expanded="false"><div data-tocid="tocId-d22872e42282" class="topicref" data-state="not-ready"><span role="button" tabindex="0" aria-labelledby="button-expand-action tocId-d22872e42282-link" class="wh-expand-btn"></span><div class="title"><a href="../reuse/notices.html" id="tocId-d22872e42282-link">Additional Resources</a><div class="wh-tooltip"><p class="shortdesc">Access additional resources, such as Offline Recovery and Compatibility
                Matrix guides.</p></div></div></div></li></ul></div>
		                        
                            </div>
                        </nav>
                    
                    
                    <div class="col-lg-9 col-md-9 col-sm-12" id="wh_topic_body">
                        
                        <div class=" wh_topic_content body "><main role="main"><article class="- topic/topic task/task topic task" role="article" aria-labelledby="ariaid-title1">
    <h1 class="- topic/title title topictitle1" id="ariaid-title1">Configuring namespace protection</h1>
    
    <div class="- topic/body task/taskbody body taskbody"><p class="- topic/shortdesc shortdesc">Create the kubeconfig file, the ClusterRole, and the ClusterRoleBinding for the
    kubeconfig user to assign the permissions required to protect all namespaces.</p>
        <section class="- topic/section task/prereq section prereq" id="d401436e58"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Before you begin</h2></div>Creating a kubeconfig file to which to assign backup and recovery permissions is a
      requirement. The kubeconfig file adds the Kubernetes cluster to <span class="- topic/ph ph">RSC</span>. The
      Kubernetes documentation provides information about creating the kubeconfig file.<p class="- topic/p p">The user
        associated with the kubeconfig file must be named rubrik-kubeconfig-user and must include
        the required permissions for the kubeconfig file.</p></section>
    <section class="- topic/section task/context section context" id="d401436e69"><div class="tasklabel"><h2 class="sectiontitle tasklabel">About this task</h2></div>The list permissions are used for backup, and the create permissions are used for
        recovery.<p class="- topic/p p">This definition protects all resources in specific namespaces, and allows get,
        list, and create permissions on all resources within protected namespaces. In this
        definition, the ClusterRole is bound to the kubeconfig user in each protected namespace
        using a RoleBinding.</p><p class="- topic/p p">Because kubeconfig permissions are limited to specific
        namespaces, Rubrik cannot export snapshots into a new namespace. Instead, you must create an
        empty namespace and the RoleBinding for the kubeconfig user before exporting a snapshot.
        Creating these enables Rubrik to export the snapshot into this namespace.</p></section>
        <section class="- topic/ol task/steps ol steps" id="d401436e79"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Procedure</h2></div><ol class="- topic/ol task/steps ol steps"><li class="- topic/li task/step li step">
                <span class="- topic/ph task/cmd ph cmd">Use the ClusterRole definition to create a ClusterRole with the minimum
                    permissions required by the kubeconfig file.</span>
                <div class="- topic/itemgroup task/info itemgroup info">
                    <p class="- topic/p p">To provide the minimum required permissions, the ClusterRole definition must
                        include the following specifications.</p>
                    <pre class="+ topic/pre pr-d/codeblock pre codeblock"><code># ClusterRole with permissions required by the Rubrik Kubeconfig
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: rubrik-kubeconfig-cluster-role
rules:
# Required to create the rubrik-kupr namespace and new namespaces during export and to delete 
# the rubrik-kupr namespace when removing the cluster
- apiGroups: [""]
  resources: ["namespaces"]
  verbs: ["create"]
- apiGroups: [""]
  resources: ["namespaces"]
  verbs: ["delete"]
  resourceNames: ["rubrik-kupr"]

# Required to list namespaces in UI
- apiGroups: [""]
  resources: ["namespaces"]
  verbs: ["list", "get"]

# Required to discover kubevirt VMs 
- apiGroups:
  - kubevirt.io
  resources:
  - virtualmachines
  verbs:
  - get
  - list

# Required to perform backup and recovery of PVCs
- apiGroups: ["snapshot.storage.k8s.io"]
  resources: ["volumesnapshotcontents", "volumesnapshots"] 
  verbs: ["create", "get", "list", "delete", "patch", "update"]
- apiGroups: ["snapshot.storage.k8s.io"]
  resources: ["volumesnapshotclasses"]
  verbs: ["list"]
- apiGroups: ["storage.k8s.io"]
  resources: ["storageclasses"]
  verbs: ["get"]
- apiGroups: [""]
  resources: ["persistentvolumes"]
  verbs: ["get", "patch", "update"]

# Required to manage Rubrik-owned CRDs
- apiGroups: ["apiextensions.k8s.io"]
  resources: ["customresourcedefinitions"]
  resourceNames: [
    "filters.apps.kupr.rubrik.com",
    "hooks.apps.kupr.rubrik.com",
    "protectionsets.apps.kupr.rubrik.com",
    "snapshots.apps.kupr.rubrik.com",
    "k8sclusters.clusters.kupr.rubrik.com",
    "rubrikclusters.clusters.kupr.rubrik.com",
    "recoveryjobs.jobs.kupr.rubrik.com",
    "snapshotjobs.jobs.kupr.rubrik.com",
    "sladomains.sla.kupr.rubrik.com",
  ]
  verbs: ["get", "delete", "patch", "update"]
- apiGroups: ["apiextensions.k8s.io"]
  resources: ["customresourcedefinitions"]
  verbs: ["create"]

# Required to keep the Rubrik CR objects in sync with RSC
- apiGroups: ["apps.kupr.rubrik.com"]
  resources: ["*"]
  verbs: ["*"]
- apiGroups: ["jobs.kupr.rubrik.com"]
  resources: ["*"]
  verbs: ["*"]
- apiGroups: ["clusters.kupr.rubrik.com"]
  resources: ["*"]
  verbs: ["*"]
- apiGroups: ["sla.kupr.rubrik.com"]
  resources: ["*"]
  verbs: ["*"]
# Required to create ClusterRoleBindings for the CRD controller
- apiGroups: ["rbac.authorization.k8s.io"]
  resources: ["clusterroles"]
  verbs: ["get", "update"]
  resourceNames: ["kupr-user", "kupr-admin", "rubrik-kupr-appscontroller-role"]
- apiGroups: ["rbac.authorization.k8s.io"]
  resources: ["clusterroles"]
  verbs: ["create"]
- apiGroups: ["rbac.authorization.k8s.io"]
  resources: ["clusterrolebindings"]
  verbs: ["get", "update"]
  resourceNames: ["rubrik-kupr-appscontroller-rolebinding"]
- apiGroups: ["rbac.authorization.k8s.io"]
  resources: ["clusterrolebindings"]
  verbs: ["create"]
- apiGroups: [""]
  resources: ["events"]
  verbs: ["create", "get", "list", "patch", "update", "watch"]
# This rule allows Rubrik to get/update only secrets with the name “rubrik-svcacnt” 
# and allows creating new secrets.
# The “rubrik-svcacnt” secret is created in the rubrik-kupr namespace and is used to 
# store the RSC service account. The Rubrik Controller needs this for Rubrik CRDs to function properly.
# This rule is only needed in the rubrik-kupr namespace but since the namespace doesn’t exist before 
# adding the K8s cluster, it needs to be in the ClusterRole during cluster registration.
# Adding a K8s cluster will fail without this. This permission can be removed once the K8s cluster is 
added to RSC successfully.
- apiGroups: [""]
  resources: ["secrets"]
  verbs: ["get", "update"]
  resourceNames: ["rubrik-svcacnt"]
- apiGroups: [""]
  resources: ["secrets"]
  verbs: ["create"]</code></pre>
                    <div class="- topic/p p">
            <div class="- topic/note note note note_note"><span class="note__title">Note:</span> <div class="note__body">When using Red Hat OpenShift Kubernetes Clusters, you must include these
              additional permissions in the ClusterRole field definitions.</div></div>
            <pre class="+ topic/pre pr-d/codeblock pre codeblock"><code># Required to provide anyuid SCC permissions to rubrik-kupr service account
- apiGroups: ["rbac.authorization.k8s.io"]
  resources: ["clusterrolebindings"]
  verbs: ["get", "update"]
  resourceNames: ["rubrik-kupr-anyuid-scc-rolebinding"]
- apiGroups: ["rbac.authorization.k8s.io"]
  resources: ["clusterrolebindings"]
  verbs: ["create"]
# Required to run the Rubrik Backup Agent as root in rubrik-kupr namespace
- apiGroups: ["security.openshift.io"]
  resources: ["securitycontextconstraints"]
  resourceNames: ["anyuid"]
  verbs: ["use"]</code></pre>
          </div>
                </div>
            </li><li class="- topic/li task/step li step">
                <span class="- topic/ph task/cmd ph cmd">Use the ClusterRoleBinding definition to create a ClusterRoleBinding that
                    grants the kubeconfig user the required ClusterRole permissions.</span>
                <div class="- topic/itemgroup task/info itemgroup info">The ClusterRoleBinding definition requires that you include this text to grant
                    the kubeconfig user the required ClusterRole permissions on the Kubernetes
                    cluster.<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: rubrik-kubeconfig-cluster-role-binding
roleRef:
  kind: ClusterRole
  name: rubrik-kubeconfig-cluster-role
  apiGroup: rbac.authorization.k8s.io
subjects:
- kind: User
  name: rubrik-kubeconfig-user
  apiGroup: rbac.authorization.k8s.io</code></pre></div>
            </li><li class="- topic/li task/step li step">
        <span class="- topic/ph task/cmd ph cmd">Use the following definition to protect all resources in specific namespaces, and to
          allow get, list, and create permissions on all resources within protected
          namespaces.</span>
        <div class="- topic/itemgroup task/info itemgroup info">
          <div class="- topic/p p">You can use this definition to create the ClusterRole.
            <pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: rubrik-backup-recovery-cluster-role
rules:
# Required for backup/recovery of all resources in the cluster
- apiGroups: ["*"]
  resources: ["*"]
  verbs: ["get", "list", "create"]</code></pre></div>
          <div class="- topic/p p">Replace <var class="+ topic/keyword sw-d/varname keyword varname">&lt;namespace-name&gt;</var> with the correct namespace name, and
            apply this RoleBinding in all the namespaces you need to
            protect.<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: rubrik-backup-recovery-role-binding
 namespace: &lt;namespace-name&gt;
roleRef:
  kind: ClusterRole
  name: rubrik-backup-recovery-cluster-role
  apiGroup: rbac.authorization.k8s.io
subjects:
- kind: User
  name: rubrik-kubeconfig-user
  apiGroup: rbac.authorization.k8s.io</code></pre></div>
        </div>
      </li><li class="- topic/li task/step li step">
        <span class="- topic/ph task/cmd ph cmd">All information required to add the Kubernetes cluster to <span class="- topic/ph ph">RSC</span> must be
          in the kubeconfig file.</span>
        <div class="- topic/itemgroup task/info itemgroup info">Adding the Kubernetes cluster to <span class="- topic/ph ph">RSC</span> creates the rubrik-kupr namespace
          in the Kubernetes cluster.<div class="- topic/note note note note_note"><span class="note__title">Note:</span> <div class="note__body">When you run an AWS EKS cluster, you must update the
            --username argument in the kubeconfig file so it matches the kubeconfig
            rubrik-kubeconfig-user username when you later run the eksctl command on the Kubernetes
            command line.</div></div></div>
        <div class="- topic/itemgroup task/stepxmp itemgroup stepxmp">This example creates the iamidentitymapping in the
          rubrik_k8s_cluster.<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>eksctl create iamidentitymapping --cluster=rubrik_k8s_cluster --region=us-west-2 
--arn=arn:aws:iam::123456789012:role/rubrik-polaris-CrossAccountRole 
--username=rubrik-kubeconfig-user --no-duplicate-arns</code></pre></div>
      </li><li class="- topic/li task/step li step">
                <span class="- topic/ph task/cmd ph cmd">Add the rubrik-kupr namespace permissions to the kubeconfig file.</span>
                <div class="- topic/itemgroup task/info itemgroup info">After the cluster is added to <span class="- topic/ph ph">RSC</span>, you must update the
                    permissions in the rubrik-kupr namespace by creating a new Role and RoleBinding.
                    You do not need to update the kubeconfig file in <span class="- topic/ph ph">RSC</span> after
                    adding permissions in this step unless you change the user credentials in the
                    kubeconfig file.<div class="- topic/p p">This definition creates a Role with the required permissions
                        in the rubrik-kupr
                        namespace.<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>apiVersion: rbac.authorization.k8s.io/v1
kind: Role
metadata:
  namespace: rubrik-kupr
  name: rubrik-kubeconfig-role
rules:
# Required to deploy the Rubrik backup agent, deploy the CRD controller and configure the load balancer or nodeport service
- apiGroups: ["apps"]
  resources: ["deployments"]
  verbs: ["create", "delete", "get", "update", "patch"]
- apiGroups: [""]
resources: ["persistentvolumeclaims"]
  verbs: ["create", "delete", "get"]
- apiGroups: [""]
  resources: ["secrets", "serviceaccounts", "services"]
  verbs: ["create", "delete", "get", "update", "patch"]

# Required to create sample Roles for CRD RBAC
- apiGroups: ["rbac.authorization.k8s.io"]
  resources: ["roles"]
  verbs: ["create", "get", "update", "patch"]</code></pre></div><div class="- topic/p p">This
                        definition creates the RoleBinding for assigning the permissions of the role
                        to the kubeconfig
                        user.<pre class="+ topic/pre pr-d/codeblock pre codeblock"><code>apiVersion: rbac.authorization.k8s.io/v1
kind: RoleBinding
metadata:
  name: rubrik-kubeconfig-role-binding
  namespace: rubrik-kupr
roleRef:
  kind: Role
  name: rubrik-kubeconfig-role
  apiGroup: rbac.authorization.k8s.io
subjects:
- kind: User
  name: rubrik-kubeconfig-user
  apiGroup: rbac.authorization.k8s.io</code></pre></div></div>
            </li></ol></section>
        <section class="- topic/section task/result section result" id="d401436e190"><div class="tasklabel"><h2 class="sectiontitle tasklabel">Results</h2></div>You have configured namespace protection by creating the kubeconfig file, the
      ClusterRole, and then the ClusterRoleBinding for the kubeconfig user, and also assigned the
      required permissions.</section>
    </div>
</article></main></div>
                        
                        
                        
                        
                        <div id="oxygen-feedback-frame-container">
    <script id="feedback-init" defer="defer" src="https://feedback.oxygenxml.com/app/init/init.js?deploymentToken=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzUxMiJ9.eyJkZXBsb3ltZW50SWQiOjEwMTd9.NSkC-vAkGYIeB6nWQZD3t_u0V-fytjD1r9lk17zn6oPIspRxxSvSRIR_j3p5azhI-38wr3d-zqV0bEKtjnz9NA"><!-- --></script>
</div>
                        
                    </div>
                    
                </div>
            </div>
            
            
            
        </div> 
        <footer class="navbar navbar-default wh_footer">
  <div class=" footer-container mx-auto ">
    
        <title>footer</title>
    
        <div class="footer">
            <ul class="footernav">
                <li>
                    <a href="https://support.rubrik.com/" target="_blank">Support</a>
                </li>
                <li>|</li>
                <li>
                    <a href="https://www.rubrik.com/legal" target="_blank">Legal</a>
                </li>
                <li>|</li>
                <li>
                    <a href="https://www.rubrik.com/legal/privacy-policy" target="_blank">Privacy Policy</a>
                </li>
                <li>|</li>
                <li>
                    <a href="https://www.rubrik.com/legal/terms-of-use" target="_blank">Terms of Use</a>
                </li>
                <li>|</li>
                <li>
                    <a href="https://www.rubrik.com/legal/cookie-policy" target="_blank">Cookie Policy</a>
                </li>
                <li>|</li>
                <li>
                    <a href="https://www.rubrik.com/trust" target="_blank">Trust</a>
                </li>
            </ul>
        </div>
        <div class="footer">
            <ul class="footernav">
                <li>
                    CA Residents only: <a href="https://www.rubrik.com/legal/privacy-request" target="_blank">Do not sell or share my personal information</a>
                </li>
                <li>|</li>
                <li>
                    <a href="https://www.rubrik.com/legal/privacy-request" target="_blank">Do not share my sensitive information</a>
                </li>
            </ul>
        </div>
        <div class="footer">
            <script type="text/javascript">
<!--
            var generated = new Date(document.lastModified);
            var day = generated.getDate();
            var month = generated.getMonth() + 1;
            var year = generated.getFullYear();
            document.write("Generated on: " + year + '/' + (month <= 9 ? '0' + month: month) + '/' + (day <= 9 ? '0' + day: day));// --></script>
        </div>
        <div class="footer">Copyright © Rubrik - Zero Trust Data
            Security™</div>
    
  </div>
</footer>
        
        <button id="go2top" class="d-print-none" title="Go to top">
            <span class="oxy-icon oxy-icon-up"></span>
        </button>
        
        <div id="modal_img_large" class="modal">
            <span class="close oxy-icon oxy-icon-remove"></span>
            <div id="modal_img_container"></div>
            <div id="caption"></div>
        </div>
        
        <!-- Google tag (gtag.js) -->
<script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-DMGQTWDCY4"></script>
<script><!--

    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    
    gtag('config', 'G-DMGQTWDCY4');

--></script>
        
    </body>
</html>